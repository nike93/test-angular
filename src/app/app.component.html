<mat-table cdkDropList
           cdkDropListOrientation="horizontal"
           (cdkDropListDropped)="tableDrop($event)"
           [dataSource]="data">

  <ng-container *ngFor="let column of columns; let i = index"
                [matColumnDef]="column.name">
    <mat-header-cell *matHeaderCellDef
                     cdkDrag
                     cdkDragLockAxis="x"
                     [index]="i"
                     [resizeColumn]="true">{{ column.title }}</mat-header-cell>
    <mat-cell *matCellDef="let item">{{ item[column.name] }}</mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="nameColumns"
                  class="tableHeaderRow"
                  #tableHeaderRow></mat-header-row>
  <mat-row *matRowDef="let row; columns: nameColumns;"></mat-row>

</mat-table>
