<table mat-table cdkDropList
           cdkDropListOrientation="horizontal"
           (cdkDropListDropped)="tableDrop($event)"
           [dataSource]="data">

  <ng-container *ngFor="let column of columns; let i = index"
                [matColumnDef]="column.name">
    <th mat-header-cell *matHeaderCellDef
                     [index]="i"
                     cdkDrag
                     cdkDragLockAxis="x"
                     [resizeColumn]="true">{{ column.title }}</th>
    <td mat-cell *matCellDef="let item">{{ item[column.name] }}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="nameColumns"
                  class="tableHeaderRow"
                  #tableHeaderRow></tr>
  <tr mat-row *matRowDef="let row; columns: nameColumns;"></tr>

</table>
